<!--添加数据项模态框-->
<div class="modal bootstrap-dialog type-primary fade size-normal in" style="display : block;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-f2">
        <a role="button" ng-click="closeDialog();" class="close">×</a>
        <h4 class="modal-title info-box-number">数据项信息</h4>
      </div>
      <div class="modal-body clearfix row ">
        <form role="form" class="form-horizontal" name="dataForm">
          <label class="col-sm-12 margin-left-5 margin-bottom-20" ng-click="showTempId = !showTempId">基本配置</label>

          <div class="form-group col-sm-6">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <a href="../app-oc/index.html#/kpiType" target="_blank" title="添加数据项"><span><i class="fa fa-plus"></i></span></a>
              <span class="text-danger ng-binding">*</span> <span class="ng-binding">数据项：</span>
            </label>
            <div class="col-sm-8">
              <input type="text" ng-disabled="addDataObj.deviceMode" class="form-control input-sm select2-input" autocomplete="off" ng-model="addDataObj.name" name="Name" maxlength="32" required="required">
              <select select2 ng-disabled="addDataObj.deviceMode" class="form-control select-sm" ng-model="select2Kpi" selectdata="defaultKpiList" ng-change="selectChange(select2Kpi);" ng-options="value as value.text for value in defaultKpiList">
              </select>
            </div>
          </div>  
          <div class="form-group col-sm-6">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="text-danger ng-binding">*</span> <span class="ng-binding">名称：</span>
            </label>
            <div class="col-sm-8">
              <input type="text" ng-disabled="addDataObj.deviceMode"  maxlength="32" class="form-control input-sm" ng-model="addDataObj.label" name="Name" required="required">
            </div>
          </div>

          <div class="form-group col-sm-6">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="text-danger ng-binding">*</span> <span class="ng-binding">单位：</span>
            </label>
            <div class="col-sm-8">
              <select select2 ng-disabled="addDataObj.deviceMode" class="form-control select-sm" ng-model="addDataObj.unit" selectdata="myOptions" ng-options="value.unitCode as value.unitName for value in myOptions">
              </select>
              <!--<select ng-disabled="addDataObj.deviceMode" class="form-control input-sm" required="required" ng-model="addDataObj.unit" placeholder="请选择..." ng-options="value.unitCode as value.unitName for value in myOptions">
                <option value="">请选择</option>
              </select>-->
            </div>
          </div>
          <div class="form-group col-sm-6 ">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
                <span class="text-danger ng-binding">*</span> <span class="ng-binding">是否数值：</span>
              </label>
            <div class="col-sm-8">
              <select ng-disabled="addDataObj.deviceMode" class="form-control input-sm" required="required" ng-model="addDataObj.number"
                ng-options="o.v as o.n for o in [{ n: '请选择', v: '' }, { n: '是', v: true }, { n: '否', v: false }]">
              </select>
            </div>
          </div>
          <!-- 宝钢项目不使用 -->
          <div class="form-group col-sm-6 ">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="text-danger ng-binding">*</span> <span class="ng-binding">数据分类：</span>
            </label>
            <div class="col-sm-8">
              <select ng-disabled="addDataObj.deviceMode" class="form-control input-sm" required="required" ng-model="addDataObj.type">
                <option value="">请选择</option>
                <option value="kpi">测点</option>
                <option value="fault">故障</option>
              </select>
            </div>
          </div>
          <!-- 宝钢使用    
          <div class="form-group col-sm-6 ">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="text-danger ng-binding">*</span> <span class="ng-binding">检测专业：</span>
            </label>
            <div class="col-sm-8">
              <select ng-disabled="addDataObj.deviceMode" class="form-control input-sm" required="required" ng-model="addDataObj.values.specialtyProp" placeholder="请选择..." ng-options="value.value as value.label for value in specialtyProps">
                <option value="">请选择</option>
              </select>
            </div>
          </div>
          -->
          <div class="form-group col-sm-6 ">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h"><span class="ng-binding">取值范围：</span></label>
            <div class="col-sm-8">
              <input type="text" ng-disabled="addDataObj.deviceMode" class="form-control input-sm" title="例如:[-10,50]" ng-model="addDataObj.range">
            </div>
          </div>

          <div class="form-group col-sm-6 ">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
                <span class="ng-binding">显示图标：</span>
            </label>
            <div class="col-sm-8">
              <select ng-disabled="addDataObj.deviceMode" ng-model="addDataObj.icon" ng-options="value.icon as value.title for value in kpiIconList" class="form-control input-sm">
                <option value="">请选择</option>
              </select>
            </div>
          </div>

          <label ng-show="showTempId" class="col-sm-12 margin-left-5 margin-bottom-20">关联配置</label>
          <!-- 关联模板 临时使用 -->
          <div ng-show="showTempId" class="form-group col-sm-6">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="ng-binding">关联模板：</span>
            </label>
            <div class="col-sm-8">
              <select select2 ng-disabled="addDataObj.deviceMode" class="form-control select-sm" ng-model="addDataObj.tempModelId" selectdata="modelListSelect" ng-options="value.id as value.label for value in modelListSelect">
              </select>
            </div>
          </div>
          <!-- 关联Id 临时使用 -->
          <div ng-show="showTempId" class="form-group col-sm-6">
            <label class="col-sm-4 dialog-control-label no-padding-right dialog-control-h">
              <span class="ng-binding">关联ID：</span>
            </label>
            <div class="col-sm-8">
              <select select2 ng-disabled="addDataObj.deviceMode" class="form-control select-sm" ng-model="addDataObj.tempId" selectdata="rootModelsDic[addDataObj.tempModelId].kpiDic" ng-options="value.id as value.label for value in rootModelsDic[addDataObj.tempModelId].kpiDic">
              </select>
            </div>
          </div>
          <label class="col-sm-12 margin-left-5 margin-bottom-20">存储配置</label>

          <div class="form-group">
            <div class="col-sm-3 margin-left-30 no-padding-right checkbox">
              <label><input type="checkbox" ng-disabled="addDataObj.displayMode" ng-model="addDataObj.compress">启用压缩存储</label>
            </div>
            <div class="col-sm-8 no-padding-right no-padding-left checkbox">
              <span>数据每采集<input type="number"  ng-disabled="!addDataObj.compress || addDataObj.displayMode"  min="0"  max="32767" oninput="if( !/[0-9\.]/.test(this.value)){this.value='0';}else if(value>32767){value=32767}"  ng-model="addDataObj.compressTime" class=" width-50 no-padding-right padding-left-5 margin-right-5 margin-left-15">次内无变化不记录，</span>
            </div>
          </div>

          <div class="form-group">
            <div class="col-sm-3 margin-left-30 no-padding-right  checkbox">
              <!--<label><input type="checkbox" ng-disabled="!addDataObj.compress" ng-model="addDataObj.deadZone">启用死区设置</label>-->
            </div>
            <div class="col-sm-8 no-padding-right no-padding-left checkbox">
              <span>数据波动在<b style="font-size: 15px;">±</b><input type="number" min="0" oninput="if( !/[0-9\.]/.test(this.value)){this.value='0';}else if(value.length>9)value=value.slice(0,9)" ng-disabled="!addDataObj.compress || addDataObj.displayMode"  ng-model="addDataObj.deadZoneRange" class=" width-50 no-padding-right padding-left-5 margin-right-5 margin-left-5"> 范围内不会进行上报。</span>
            </div>
          </div>

          <div class="form-group">
            <div class="col-sm-3 margin-left-30 no-padding-right  checkbox">
              <label><input ng-disabled="addDataObj.displayMode"  ng-change="checkChang();" ng-model="addDataObj.interval" type="checkbox"> 启用存储间隔</label>
            </div>
            <div class="col-sm-8 no-padding-right no-padding-left checkbox">
              <span>数据每采集<input type="number"  ng-disabled="!addDataObj.interval || addDataObj.displayMode"  min="0"  max="32767" oninput="if( !/[0-9\.]/ .test(this.value)){this.value='0';} else if(value>32767)value=32767"   ng-model="addDataObj.intervalTime" class=" width-50 no-padding-right padding-left-5 margin-right-5 margin-left-15"> 次后存储一条历史记录。</span>
            </div>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" ng-disabled="dataForm.$invalid  || isLoading" ng-click="saveKpi()" disabled="disabled">
          确定
        </button>
        <button class="btn btn-default" ng-click="closeDialog();">取消</button>
      </div>
    </div>
  </div>
</div>