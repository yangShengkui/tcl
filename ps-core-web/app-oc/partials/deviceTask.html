<!-- Main content -->
<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <div class="box">
        <div class="box-header">
          <div class="box-tools pull-left nav-tabs-header">
            <ul class="nav nav-tabs" role="tablist">
              <li class="active" name="tab1" ng-show="detail.taskStatus != 200"><a role="button" data-toggle="tab">处理任务</a></li>
              <li class="active" name="tab1" ng-show="detail.taskStatus == 200"><a role="button" data-toggle="tab">任务详情</a></li>
            </ul>
          </div>
          <div class="box-tools pull-right">
            <span class="history-btn" data-toggle="返回" title="" data-original-title="返回" onclick="window.history.back();" role="button"><i class="proudsmart ps-back-01"></i></span>
          </div>
        </div>
        <div class="box-body">
          <button class="btn btn-default btn-sm" ng-show="detail.taskStatus != 200 && detail.taskStatus != 100 && selectList.ticketStatus != false " ng-click="processTask(100);"><i class="fa fa-check"></i><span class="hidden-sm"> 确认任务</span></button>
          <button class="btn btn-primary btn-sm" ng-show="detail.taskStatus != 200 && selectList.ticketStatus != false " ng-click="processTask(200);"><i class="fa fa-dot-circle-o"></i><span class="hidden-sm"> 完成任务</span></button>
        </div>
        <div class="box-footer no-pad-top no-border">
          <div class="bk-scope bk-theme-mini" >
            <dl class="bk-group">
              <dt class="bk-group-title"><span>基础信息</span></dt>
              <dd class="bk-group-detail">
                <div class="box-body">
                  <form role="form" class="form-horizontal tab-pane active" name="myForm" style="font-size: 14px">
                    <div class="form-group">
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4 align-right ">工单编号：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.ticketNo" type="text" disabled/>-->
                          <span>{{taskList.ticketNo}}</span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4  align-right">派单日期：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.ticketCommitTime"  type="text" disabled/>-->
                          <span>{{taskList.ticketCommitTime}}</span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4  align-right">派单人：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.ticketCreatorName"  type="text" disabled/>-->
                          <span>{{taskList.ticketCreatorName}}</span>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <div  ng-show="baseConfig.customerConfig.display" class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4 align-right">所属客户：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.customerName"  type="text" disabled/>-->
                          <span><a  href="#/userclient/{{taskList.customerID}}/">{{taskList.customerName}}</a> </span>
                        </div>
                      </div>
                      <div  ng-show="baseConfig.projectConfig.display" class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4 align-right">所属项目：</label>
                        <div class="col-sm-6 ">
                          <!--<input class="form-control"  ng-model="taskList.projectName"  type="text" disabled/>-->
                          <span><a href="index.html#/projectManagement///{{taskList.projectId}}" class="control-label">{{projectsDic[taskList.projectId].projectName}}</a></span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4 align-right">设备模板：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.modelName"  type="text" disabled/>-->
                          <span><a  href="#/resource_type/{{taskList.modelID}}/0 ">{{taskList.modelName}}</a></span>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4 align-right">设备序列号：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.deviceSn"  type="text" disabled/>-->
                          <span><a href="../app-oc/index.html#/facility/sn/{{taskList.deviceSn}}" class="control-label">{{taskList.deviceSn}}</a></span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <label class="col-sm-4  align-right">故障码：</label>
                        <div class="col-sm-6">
                          <!--<input class="form-control"  ng-model="taskList.faultNo"  type="text" disabled/>-->
                          <span> <a href="#faultKnowledge/{{taskList.faultNo}}" class="control-label">{{taskList.faultNo}}</a></span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-top: 20px;">
                        <a href="#/emcsView/{{detail.variables.device.id}}" class="col-sm-4 control-label ">设备测点数据</a>
                        <a href="#/configAlert/{{detail.variables.device.id}}/node" class="col-sm-4 control-label">设备告警数据</a>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="col-sm-8" style="padding-top: 20px;">
                        <label class="col-sm-2 align-right" style="padding-right: 20px;">工单内容：</label>
                        <div class="col-sm-8">
                          <!--<textarea class="col-md-12 form-control" style="height:100px;resize: none;" ng-model="taskList.faultPhenomenon" maxlength="500" type="text" placeholder="最多可输入500字" disabled>{{taskList.faultPhenomenon}}</textarea>-->
                          <span >{{taskList.faultPhenomenon}}</span>
                        </div>
                      </div>
                    </div>
                    <div class="form-group margin-bottom-20">
                      <div class="col-sm-8" style="padding-top: 20px;">
                        <label class="col-sm-2 control-label"  style="padding-right: 20px;">处理说明：</label>
                        <div class="col-sm-8">
                          <textarea class="col-md-12 form-control" style="height:100px;resize: none;"  ng-disabled="detail.taskStatus == 200" ng-model="definitions.ticketTaskDesc" name="discription" maxlength="500" type="text" placeholder="最多可输入500字"></textarea>
                        </div>
                      </div>
                    </div>

                  </form>
                </div>
              </dd>
            </dl>
            <dl ng-show="status == 'spare'" class="bk-group">
              <dt class="bk-group-title"><span>设备备件</span></dt>
              <dd class="bk-group-detail">
                <div class="box-header margin-bottom-10" ng-show="detail.taskStatus!= 200 ">
                  <select class="form-control dialog-inp-text select-sm "  ng-model="selectMajor" selectdata="allSpareParts" ng-change="saveAttachment();" ng-options="value.id as value.name for value in allSpareParts" select2>
                    <option value="">请选择...</option>
                  </select>
                </div>
                <div class="box">
                  <table width="100%" class="table table-hover" name="major" major-device-table></table>
                </div>
              </dd>
            </dl>
            <dl ng-show="status == 'Inspection'" class="bk-group">
              <dt class="bk-group-title"><span>维保标准</span></dt>
              <dd class="bk-group-detail">
                <div class="box-header margin-bottom-10">
                  <!--<button class="btn btn-default btn-sm" ><i class="fa fa-file-picture-o"></i><span class="hidden-sm"> 上传图片</span></button>-->
                  <a role="button"  ng-show="detail.taskStatus != 200" style="color: #000;"  ng-click="toggle()" class="btn btn-sm btn-default btn-flat pull-left margin-right-10">
                    <i class="fa fa-file-picture-o"></i>  上传图片</a>
                  <input id="nv-file-select" style="display:none" class="form-control input-sm" type="file" nv-file-select="" uploader="uploader">
                </div>
                <div class="box-header margin-bottom-10">
                  <a target="blank" ng-show="imgList.length > 0" ng-repeat="imgs in imgList" href="{{urlService}}{{imgs}}"><img style="width:70px;height:70px; margin-right:5px;" src="{{urlService}}{{imgs}}" alt=""></a>

                </div>
                <div class="row">
                  <div class="col-md-12  margin-bottom-20">
                    <table class="table  table-hover dataTable">
                      <thead>
                      <tr role="row">
                        <th>维保标准</th>
                        <th>是否正常</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr ng-if="devicesList.length > 0 " ng-repeat="devices in devicesList">
                        <td>{{devices.item}}</td>
                        <td>
                          <select ng-model="devices.status" ng-disabled="detail.taskStatus == 200" class="form-control bk-select bk-select-l2">
                            <option value="0">正常</option>
                            <option value="1">异常</option>
                          </select>
                        </td>
                      </tr>
                      <tr ng-if="devicesList.length <= 0 ">
                        <td valign="top" colspan="5" class="dataTables_empty"><i class="fa fa-success text-danger"></i>没有符合条件的记录</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>